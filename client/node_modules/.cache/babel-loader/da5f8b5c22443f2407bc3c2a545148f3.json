{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import _objectSpread from\"/home/mohamed/Bureau/Go my code/Big Finally/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/home/mohamed/Bureau/Go my code/Big Finally/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/mohamed/Bureau/Go my code/Big Finally/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import Container from\"react-bootstrap/Container\";import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faPlusCircle,faTimesCircle,faEdit,faPlus}from'@fortawesome/free-solid-svg-icons';import Popover from\"react-bootstrap/Popover\";import OverlayTrigger from\"react-bootstrap/OverlayTrigger\";import Button from\"react-bootstrap/Button\";import\"./Quizzes.css\";import{getQuizzes,editQuizById,addQuiz,removeQuiz}from'../../../../js/actions/quizaction';import{getQuestions}from'../../../../js/actions/questionaction';export default function Quizzes(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isModif=_useState2[0],setIsModif=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),addQuest=_useState4[0],setAddQuest=_useState4[1];var _useSelector=useSelector(function(state){return state.qs;}),isLoading=_useSelector.isLoading,quizzes=_useSelector.quizzes;var _useSelector2=useSelector(function(state){return state.quests;}),questions=_useSelector2.questions;var dispatch=useDispatch();var getAllQuizzes=function getAllQuizzes(){return dispatch(getQuizzes());};var getAllQuestions=function getAllQuestions(){return dispatch(getQuestions());};var _useState5=useState({name:\"\",category:\"\",Questions:[]}),_useState6=_slicedToArray(_useState5,2),form=_useState6[0],setForm=_useState6[1];var categoryList=_toConsumableArray(new Set(questions.map(function(el){return el.category;})));// filtrer les quests qui appartiennent a la categ selectionner\nvar questionsFiltred=questions.filter(function(question){return question.category===form.category;});useEffect(function(){getAllQuizzes();},[]);useEffect(function(){getAllQuestions();},[isModif]);var handleChangeEdit=function handleChangeEdit(id){setIsModif(true);var quizSelected=quizzes.find(function(el){return el._id===id;});setForm(quizSelected);};var handleChangeAddQuest=function handleChangeAddQuest(id){var questionSelected=questions.find(function(el){return el._id===id;});setForm(_objectSpread(_objectSpread({},form),{},{Questions:[].concat(_toConsumableArray(form.Questions),[questionSelected])}));};var handleChangeInput=function handleChangeInput(e){switch(e.target.name){case\"category\":setForm(_objectSpread(_objectSpread({},form),{},{category:e.target.value}));break;case\"name\":setForm(_objectSpread(_objectSpread({},form),{},{name:e.target.value}));break;default:setForm(_objectSpread(_objectSpread({},form),{},{Questions:e.target.value}));}};var editQuiz=function editQuiz(id,formData){return dispatch(editQuizById(id,formData));};var addNewQuiz=function addNewQuiz(inputData){return dispatch(addQuiz(inputData));};var handleChangeSubmit=function handleChangeSubmit(e){e.preventDefault();isModif?editQuiz(form._id,form):addNewQuiz(form);setIsModif(false);};var handleChangeAdd=function handleChangeAdd(){setForm({name:\"\",category:\"\",Questions:[]});setAddQuest(true);setIsModif(false);};var removeQuestionByID=function removeQuestionByID(id){return dispatch(removeQuiz(id));};var popover=function popover(j){return/*#__PURE__*/_jsxs(Popover,{id:\"popover-basic\",children:[/*#__PURE__*/_jsxs(Popover.Title,{as:\"h3\",children:[\"Difficulty : \",form.Questions[j].difficulty]}),/*#__PURE__*/_jsx(Popover.Content,{dangerouslySetInnerHTML:{__html:form.Questions[j].question}})]});};return/*#__PURE__*/_jsx(Container,{className:\"question-container\",children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{sm:6,className:\"Details-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card my-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsxs(\"h5\",{className:\"card-title\",children:[!addQuest?\"Edit Quiz\":\"Add Quiz\",\" \"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-6 mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Quiz Name :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",className:\"form-control\",value:form.name,disabled:addQuest||isModif?false:true,onChange:function onChange(e){return handleChangeInput(e);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:addQuest?\"d-none\":\"col-4 mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Quiz ID :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"_id\",className:\"form-control\",value:form._id,disabled:addQuest||isModif?false:true,onChange:function onChange(e){return handleChangeInput(e);}})]})]}),/*#__PURE__*/_jsx(\"form\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-6\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",children:[\" \",isModif?\"category:\":\"category List:\"]}),/*#__PURE__*/_jsxs(\"select\",{name:\"category\",className:\"form-select mb-3\",value:form.category,onChange:function onChange(e){return handleChangeInput(e);},disabled:addQuest||!isModif?false:true,children:[/*#__PURE__*/_jsx(\"option\",{children:\"Open this select menu\"}),categoryList.map(function(el){return/*#__PURE__*/_jsx(\"option\",{children:el});})]})]})}),/*#__PURE__*/_jsx(\"form\",{className:\"row\"}),/*#__PURE__*/_jsx(\"form\",{className:\"Quizzes-container d-flex flex-wrap align-content-around justify-content-around\",children:form.Questions.map(function(question,j){return/*#__PURE__*/_jsx(OverlayTrigger,{trigger:\"click\",placement:\"right\",overlay:popover(j),children:/*#__PURE__*/_jsxs(Button,{variant:\"success\",children:[\"QUIESTION N\\xB0 \",j+1,\" \"]})});})}),/*#__PURE__*/_jsxs(\"form\",{className:\"col-md-12 border-info d-flex justify-content-between mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-dark\",onClick:handleChangeSubmit,children:addQuest?\"ADD\":\"UPDATE\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-dark border-0 rounded-circle\",onClick:handleChangeAdd,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{size:\"1x\",icon:faPlusCircle})})]})]})]})}),/*#__PURE__*/_jsxs(Col,{sm:6,className:\"list-container\",children:[/*#__PURE__*/_jsx(Row,{className:\"Quizzes-table table-sm\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table my-2 w-100 h-50\",style:{width:\"12rem\"},children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Quizzes\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Management\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-light\",children:quizzes.map(function(quiz,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:quiz.name}),/*#__PURE__*/_jsx(\"td\",{children:quiz.category}),/*#__PURE__*/_jsxs(\"td\",{className:\"d-flex justify-content-around\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-danger rounded-circle\",onClick:function onClick(){return removeQuestionByID(quiz._id);},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimesCircle})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-success rounded-circle\",onClick:function onClick(){return handleChangeEdit(quiz._id);},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faEdit})})]})]});})})]})}),/*#__PURE__*/_jsx(Row,{className:\"Quizzes-table table-sm\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table my-2 h-50 w-100 \",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Question\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Difficulty\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Management\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-light\",children:form.category===\"\"?null:questionsFiltred.map(function(el,i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:i+1}),/*#__PURE__*/_jsx(\"td\",{dangerouslySetInnerHTML:{__html:el.question}}),/*#__PURE__*/_jsx(\"td\",{children:el.difficulty}),/*#__PURE__*/_jsx(\"td\",{className:\"d-flex justify-content-around\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-success rounded-circle\",onClick:function onClick(){return handleChangeAddQuest(el._id);},children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faPlus})})})]});})})]})})]})]})});}","map":{"version":3,"sources":["/home/mohamed/Bureau/Go my code/Big Finally/client/src/Components/Admin Component/Views/Quizzes Component/Quizzes.js"],"names":["React","useEffect","useState","useSelector","useDispatch","Container","Row","Col","FontAwesomeIcon","faPlusCircle","faTimesCircle","faEdit","faPlus","Popover","OverlayTrigger","Button","getQuizzes","editQuizById","addQuiz","removeQuiz","getQuestions","Quizzes","isModif","setIsModif","addQuest","setAddQuest","state","qs","isLoading","quizzes","quests","questions","dispatch","getAllQuizzes","getAllQuestions","name","category","Questions","form","setForm","categoryList","Set","map","el","questionsFiltred","filter","question","handleChangeEdit","id","quizSelected","find","_id","handleChangeAddQuest","questionSelected","handleChangeInput","e","target","value","editQuiz","formData","addNewQuiz","inputData","handleChangeSubmit","preventDefault","handleChangeAdd","removeQuestionByID","popover","j","difficulty","__html","width","quiz","i"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlusCircle, faTimesCircle, faEdit,faPlus} from '@fortawesome/free-solid-svg-icons';\nimport Popover from \"react-bootstrap/Popover\"\nimport OverlayTrigger from \"react-bootstrap/OverlayTrigger\"\nimport Button from \"react-bootstrap/Button\"\n\n\n\nimport \"./Quizzes.css\";\n\n\nimport { getQuizzes,editQuizById,addQuiz,removeQuiz } from '../../../../js/actions/quizaction'\nimport { getQuestions} from '../../../../js/actions/questionaction'\n\nexport default function Quizzes() {\n\n    const [isModif, setIsModif] = useState(false)\n    const [addQuest, setAddQuest] = useState(false)\n   \n\n    const { isLoading, quizzes } = useSelector(state => state.qs)\n    const { questions } = useSelector(state => state.quests)\n    const dispatch = useDispatch();\n    const getAllQuizzes = () => dispatch(getQuizzes())\n    const getAllQuestions = () => dispatch(getQuestions())\n    const [form, setForm] = useState({\n        name: \"\",\n        category: \"\",\n        Questions: []\n    })\n\n    const categoryList =[...new Set(questions.map((el)=>el.category))]\n    // filtrer les quests qui appartiennent a la categ selectionner\n    const questionsFiltred = questions.filter((question)=>question.category===form.category)\n\n    useEffect(() => {\n        getAllQuizzes()\n    }, [])\n    useEffect(() => {\n        getAllQuestions()\n    }, [isModif])\n\n\n    \n\n\n\n    const handleChangeEdit = (id) => {\n        setIsModif(true)\n        const quizSelected = quizzes.find((el) => el._id === id)\n        setForm(quizSelected);\n    }\n    const handleChangeAddQuest = (id)=>{\n        const questionSelected = questions.find((el) => el._id === id)\n        setForm({...form,Questions:[...form.Questions,questionSelected]})\n    }\n    const handleChangeInput =(e)=>{\n        switch(e.target.name){\n            case \"category\":\n            setForm({...form,category:e.target.value});    \n            break;\n            case \"name\":\n            setForm({...form,name:e.target.value}); \n            break;\n            default:\n            setForm({...form,Questions:e.target.value});\n\n        }\n    }\n    const editQuiz = (id,formData) => dispatch(editQuizById(id,formData));\n    const addNewQuiz = (inputData) => dispatch(addQuiz(inputData));\n\n    const handleChangeSubmit =(e)=>{\n        e.preventDefault()\n        isModif ? editQuiz(form._id,form):addNewQuiz(form)\n        setIsModif(false)\n    }\n\n\n    const handleChangeAdd =()=>{\n        setForm({\n            name:\"\",\n           category:\"\",\n           Questions:[] \n        })\n       setAddQuest(true)\n       setIsModif(false)\n    }\n\n    const removeQuestionByID =(id) => dispatch(removeQuiz(id))\n\n\n    const popover = (j) => (\n        <Popover id=\"popover-basic\">\n            <Popover.Title as=\"h3\">Difficulty : {form.Questions[j].difficulty}</Popover.Title>\n            <Popover.Content dangerouslySetInnerHTML={{__html:form.Questions[j].question}}>\n                \n            </Popover.Content>\n        </Popover>\n    );\n    return (\n        <Container className=\"question-container\">\n            <Row>\n                <Col sm={6} className=\"Details-container\">\n                    <div className=\"card my-1\">\n                        <div className=\"card-header\">\n                            <h5 className=\"card-title\">{!addQuest? \"Edit Quiz\":\"Add Quiz\"} </h5>\n                        </div>\n                        <div className=\"card-body\">\n                            <form className=\"row\">\n                                <div className=\"col-6 mb-2\">\n                                    <label className=\"form-label\">Quiz Name :</label>\n                                    <input type=\"text\" name=\"name\" className=\"form-control\"\n                                        value={form.name}\n                                        disabled={addQuest || isModif ?  false: true}\n                                        onChange={(e)=>handleChangeInput(e)}\n                                    />\n                                </div>\n                                <div className={addQuest ? \"d-none\" : \"col-4 mb-2\"}>\n                                    <label className=\"form-label\">Quiz ID :</label>\n                                    <input type=\"text\" name=\"_id\" className=\"form-control\"\n                                        value={form._id}\n                                        disabled={addQuest || isModif ? false : true}\n                                        onChange={(e)=>handleChangeInput(e)}\n                                    />\n                                </div>\n                            </form>\n\n                            <form className=\"row\">\n                                <div className=\"col-6\">\n                                    <label className=\"form-label\"> {isModif ? \"category:\" : \"category List:\"}</label>\n                                    <select name=\"category\" className=\"form-select mb-3\" value={form.category}\n                                                                onChange={(e)=>handleChangeInput(e)}\n                                                                disabled={addQuest || !isModif ?  false: true}\n                                                                >\n                                            <option>Open this select menu</option>\n                                            {\n                                                categoryList.map((el)=><option>{el}</option>)\n                                            }\n\n                                    </select>\n                                    \n                                </div>\n                            </form>\n                            <form className=\"row\">\n\n                            </form>\n                            <form className=\"Quizzes-container d-flex flex-wrap align-content-around justify-content-around\">\n                                {\n                                    form.Questions.map((question, j) => (<OverlayTrigger trigger=\"click\" placement=\"right\" overlay={popover(j)}>\n                                        <Button variant=\"success\">QUIESTION N° {j + 1} </Button>\n                                    </OverlayTrigger>))\n                                }\n\n                            </form>\n                            <form className=\"col-md-12 border-info d-flex justify-content-between mt-2\">\n                                    <button type=\"button\"   className=\"btn btn-outline-dark\"  \n                                                            onClick={handleChangeSubmit}\n                                                            >{addQuest? \"ADD\":\"UPDATE\"}</button>\n                                    <button type=\"button\"   className=\"btn btn-dark border-0 rounded-circle\"  \n                                                onClick={handleChangeAdd}\n                                                >\n                                                <FontAwesomeIcon size=\"1x\" icon={faPlusCircle}/>\n                                    </button>\n                            </form>\n                            \n                        </div>\n                    </div>\n                </Col>\n                <Col sm={6} className=\"list-container\">\n                    <Row className=\"Quizzes-table table-sm\">\n                        <table className=\"table my-2 w-100 h-50\" style={{ width: \"12rem\" }}>\n                            <thead className=\"thead-dark\">\n                                <tr >\n                                    <th scope=\"col\">#</th>\n                                    <th scope=\"col\">Quizzes</th>\n                                    <th scope=\"col\">Category</th>\n                                    <th scope=\"col\">Management</th>\n                                </tr>\n                            </thead>\n                            <tbody className=\"bg-light\">\n                                {\n                                    quizzes.map((quiz, i) => (\n                                        <tr>\n                                            <th scope=\"row\">{i + 1}</th>\n                                            <td>{quiz.name}</td>\n                                            <td>{quiz.category}</td>\n                                            <td className=\"d-flex justify-content-around\">\n                                                <button type=\"button\" className=\"btn btn-outline-danger rounded-circle\"\n                                                    onClick={()=>removeQuestionByID(quiz._id)}\n                                                ><FontAwesomeIcon icon={faTimesCircle} /></button>\n                                                <button type=\"button\" className=\"btn btn-outline-success rounded-circle\"\n                                                    onClick={() => handleChangeEdit(quiz._id)}\n                                                ><FontAwesomeIcon icon={faEdit} /></button>\n                                            </td>\n                                        </tr>\n                                    ))\n                                }\n                            </tbody>\n                        </table>\n                    </Row>\n                    <Row className=\"Quizzes-table table-sm\">\n                        <table className=\"table my-2 h-50 w-100 \">\n                            <thead className=\"thead-dark\">\n                                <tr >\n                                    <th scope=\"col\">#</th>\n                                    <th scope=\"col\">Question</th>\n                                    <th scope=\"col\">Difficulty</th>\n                                    <th scope=\"col\">Management</th>\n                                </tr>\n                            </thead>\n                            <tbody className=\"bg-light\">\n                                {\n                                    form.category===\"\"? null:\n                                    questionsFiltred.map((el, i) =>(\n                                        \n                                        <tr>\n                                            <th scope=\"row\" >{i + 1}</th>\n                                            <td dangerouslySetInnerHTML={{__html:el.question}}></td>\n                                            <td>{el.difficulty}</td>\n                                            <td className=\"d-flex justify-content-around\">\n                                                \n                                                <button type=\"button\" className=\"btn btn-outline-success rounded-circle\"\n                                                    onClick={() => handleChangeAddQuest(el._id)}\n                                                ><FontAwesomeIcon icon={faPlus} /></button>\n                                            </td>\n                                        </tr>\n                                    ))\n                                }\n\n                            </tbody>\n                        </table>\n                    </Row>\n                </Col>\n            </Row>\n        </Container>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}